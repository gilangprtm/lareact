# Diagram Alur Kerja Generator API

## Alur Utama

```
┌─────────────┐     ┌───────────────┐     ┌─────────────────┐     ┌────────────────┐
│             │     │               │     │                 │     │                │
│  Database   │────▶│  Model        │────▶│  DTO            │────▶│  API Classes   │────┐
│  Schema     │     │  Definition   │     │  Generation     │     │  Generation    │    │
│             │     │               │     │                 │     │                │    │
└─────────────┘     └───────────────┘     └─────────────────┘     └────────────────┘    │
                                                                                        │
                                                                                        ▼
                                                                          ┌────────────────────────┐
                                                                          │                        │
                                                                          │  Controller Generation │
                                                                          │                        │
                                                                          └────────────────────────┘
                                                                                        │
                                                                                        │
┌─────────────────┐     ┌────────────────┐     ┌───────────────────┐                   │
│                 │     │                │     │                   │                   │
│  OpenAPI Docs   │◀────│  Route         │◀────│  API              │◀──────────────────┘
│  Generation     │     │  Registration  │     │  Implementation   │
│                 │     │                │     │                   │
└─────────────────┘     └────────────────┘     └───────────────────┘
```

## Detail Per Tahap

### 1. Pembuatan DTO

```
┌──────────────┐     ┌──────────────────┐     ┌────────────────┐     ┌─────────────────┐
│              │     │                  │     │                │     │                 │
│ PHP Artisan  │────▶│  Schema Analysis │────▶│  Type Mapping  │────▶│  Property       │
│ make:dto     │     │                  │     │                │     │  Generation     │
│              │     │                  │     │                │     │                 │
└──────────────┘     └──────────────────┘     └────────────────┘     └─────────────────┘
                                                                               │
┌──────────────────┐     ┌──────────────────┐     ┌────────────────┐           │
│                  │     │                  │     │                │           │
│  OpenAPI Schema  │◀────│  Validation      │◀────│  Relation      │◀──────────┘
│  Annotations     │     │  Rules           │     │  Detection     │
│                  │     │                  │     │                │
└──────────────────┘     └──────────────────┘     └────────────────┘
```

### 2. Pembuatan API Classes

```
┌───────────────┐     ┌───────────────────┐     ┌────────────────────────┐
│               │     │                   │     │                        │
│  PHP Artisan  │────▶│  FormRequest      │────▶│  Rules from            │
│  make:api-    │     │  Generation       │     │  RequestDto            │
│  classes      │     │                   │     │                        │
│               │     │                   │     │                        │
└───────────────┘     └───────────────────┘     └────────────────────────┘
                                │
                                │
                                ▼
                      ┌───────────────────┐     ┌────────────────────────┐
                      │                   │     │                        │
                      │  Resource         │────▶│  Transform using       │
                      │  Generation       │     │  DTO                   │
                      │                   │     │                        │
                      │                   │     │                        │
                      └───────────────────┘     └────────────────────────┘
```

### 3. Pembuatan Controller

```
┌──────────────┐     ┌────────────────────┐     ┌────────────────────┐
│              │     │                    │     │                    │
│ PHP Artisan  │────▶│  Controller        │────▶│  CRUD Methods      │
│ make:api-    │     │  Generation        │     │  Generation        │
│ controller   │     │                    │     │                    │
│              │     │                    │     │                    │
└──────────────┘     └────────────────────┘     └────────────────────┘
                                                          │
                                                          │
                                                          ▼
                     ┌────────────────────┐     ┌────────────────────┐
                     │                    │     │                    │
                     │  OpenAPI           │────▶│  Parameter         │
                     │  Annotations       │     │  Documentation     │
                     │                    │     │                    │
                     │                    │     │                    │
                     └────────────────────┘     └────────────────────┘
```

## Alur Data

```
┌────────────┐      ┌─────────────┐      ┌───────────────┐      ┌───────────────┐
│            │      │             │      │               │      │               │
│  Model     │─────▶│  DTO        │─────▶│  Request      │─────▶│  Controller   │
│            │      │             │      │               │      │               │
└────────────┘      └─────────────┘      └───────────────┘      └───────────────┘
       │                   │                    │                       │
       │                   │                    │                       │
       │                   ▼                    │                       │
       │           ┌─────────────┐              │                       │
       │           │             │              │                       │
       │           │  OpenAPI    │◀─────────────┘                       │
       │           │  Schema     │                                      │
       │           │             │                                      │
       │           └─────────────┘                                      │
       │                                                                │
       │            ┌────────────┐            ┌───────────────┐         │
       └───────────▶│            │◀───────────│               │◀────────┘
                    │  Resource  │            │  Response     │
                    │            │────────────▶               │
                    │            │            │               │
                    └────────────┘            └───────────────┘
```
